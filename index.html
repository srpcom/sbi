<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jadwal CSR Ramadhan 1447 H</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- tsParticles -->
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.11.1/tsparticles.bundle.min.js"></script>
    
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #f8fafc; /* slate-50 base */
            
            /* ISLAMIC GEOMETRIC PATTERN (ARABESQUE) */
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23059669' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3Cpath d='M36 34c0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4 4-1.79 4-4zM6 34c0-2.21-1.79-4-4-4S-2 31.79-2 34s1.79 4 4 4 4-1.79 4-4zM6 4C6 1.79 4.21 0 2 0S-2 1.79-2 4s1.79 4 4 4 4-1.79 4-4zM36 4c0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4 4-1.79 4-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            background-attachment: fixed; /* Parallax effect feeling */
        }
        
        /* Particle Canvas */
        #tsparticles canvas {
            position: absolute !important;
            top: 0;
            left: 0;
            width: 100% !important;
            height: 100% !important;
            z-index: 0;
        }

        /* Custom Animations for Today's Card */
        @keyframes ring-pulse {
            0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
            100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .card-today {
            animation: ring-pulse 2s infinite;
            border-color: #10b981 !important; /* Emerald 500 */
            background: linear-gradient(to bottom right, #ffffff, #f0fdf4); /* White to Emerald-50 */
            z-index: 10;
        }
        
        .badge-today {
            animation: bounce-slow 2s infinite;
        }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS COMPONENTS ---
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Calendar = (props) => (
            <Icon {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></Icon>
        );
        const MapPin = (props) => (
            <Icon {...props}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></Icon>
        );
        const ShoppingBag = (props) => (
            <Icon {...props}><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></Icon>
        );
        const Gift = (props) => (
            <Icon {...props}><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></Icon>
        );
        const BookOpen = (props) => (
            <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>
        );
        const Utensils = (props) => (
            <Icon {...props}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"></path></Icon>
        );
        const Moon = (props) => (
            <Icon {...props}><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></Icon>
        );
        const ShareIcon = (props) => (
            <Icon {...props}><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></Icon>
        );

        // --- DATA ---
        // Added 'month' field: 1 for February, 2 for March (matches JS getMonth() index)
        const scheduleData = [
            { day: 19, month: 1, date: "Kamis, 19", ramadhan: 1, event: "Awal Ramadhan", loc: "", category: "Lainnya" },
            { day: 20, month: 1, date: "Jum'at, 20", ramadhan: 2, event: "", loc: "", category: "Lainnya" },
            { day: 21, month: 1, date: "Sabtu, 21", ramadhan: 3, event: "", loc: "", category: "Lainnya" },
            { day: 22, month: 1, date: "Minggu, 22", ramadhan: 4, event: "", loc: "", category: "Lainnya" },
            { day: 23, month: 1, date: "Senin, 23", ramadhan: 5, event: "Kampung Bazar Ramadhan", loc: "Desa Merkawang", category: "Bazar" },
            { day: 24, month: 1, date: "Selasa, 24", ramadhan: 6, event: "Bukber dengan PKM, Kop PKM dan Tim 6", loc: "Langgeng Resto", category: "Bukber" },
            { day: 25, month: 1, date: "Rabu, 25", ramadhan: 7, event: "Kampung Bazar Ramadhan", loc: "Desa Karangasem", category: "Bazar" },
            { day: 26, month: 1, date: "Kamis, 26", ramadhan: 8, event: "Bukber dgn OPD dan Stakeholder", loc: "Lynn Hotel", category: "Bukber" },
            { day: 27, month: 1, date: "Jum'at, 27", ramadhan: 9, event: "Kampung Bazar Ramadhan", loc: "Desa Glondonggede", category: "Bazar" },
            { day: 28, month: 1, date: "Sabtu, 28", ramadhan: 10, event: "", loc: "", category: "Lainnya" },
            
            // Next Month (Maret)
            { day: 1, month: 2, date: "Minggu, 1", ramadhan: 11, event: "", loc: "", category: "Lainnya" },
            { day: 2, month: 2, date: "Senin, 2", ramadhan: 12, event: "Lomba Semarak Ramadhan Tahfidz Al-Qur'an (RKTM)", loc: "", category: "Edukasi" },
            { day: 3, month: 2, date: "Selasa, 3", ramadhan: 13, event: "Kampung Bazar Ramadhan", loc: "Desa Sawir", category: "Bazar" },
            { day: 4, month: 2, date: "Rabu, 4", ramadhan: 14, event: "Kampung Bazar Ramadhan", loc: "Desa Mliwang", category: "Bazar" },
            { day: 5, month: 2, date: "Kamis, 5", ramadhan: 15, event: "Pelatihan Manajemen Masjid & Dakwah Digital serta Buka Bersama Ustadz", loc: "Masjid SBI Pabrik Tuban", category: "Edukasi" },
            { day: 6, month: 2, date: "Jum'at, 6", ramadhan: 16, event: "900 Paket Sembako di 8 Desa", loc: "Socorejo, Sobontoro, Kenanti, Tambakboyo, Pabeyan, Gadon, Klutuk", category: "Sosial" },
            { day: 7, month: 2, date: "Sabtu, 7", ramadhan: 17, event: "Bukber GAC Family", loc: "Surabaya", category: "Bukber" },
            { day: 8, month: 2, date: "Minggu, 8", ramadhan: 18, event: "", loc: "", category: "Lainnya" },
            { day: 9, month: 2, date: "Senin, 9", ramadhan: 19, event: "1.400 Paket Sembako di 4 Desa & Kampung Bazar", loc: "Sawir, Karangasem, Glondonggede, Merkawang, Kedungrejo", category: "Sosial" },
            { day: 10, month: 2, date: "Selasa, 10", ramadhan: 20, event: "1.000 Paket Sembako di 4 Desa", loc: "Mliwang (350), Kedungrejo (350), Gaji (200), Wolutengah (100)", category: "Sosial" },
            { day: 11, month: 2, date: "Rabu, 11", ramadhan: 21, event: "Bukber Kepala Desa & Camat Family + Pembagian 350 Paket Karyawan", loc: "Lynn Hotel Resto", category: "Bukber" },
            { day: 12, month: 2, date: "Kamis, 12", ramadhan: 22, event: "Bukber GAC dan Driver", loc: "Javanilla Resto", category: "Bukber" },
            { day: 13, month: 2, date: "Jum'at, 13", ramadhan: 23, event: "", loc: "", category: "Lainnya" },
            { day: 14, month: 2, date: "Sabtu, 14", ramadhan: 24, event: "", loc: "", category: "Lainnya" }
        ];

        const categories = [
            { id: 'Semua', label: 'Semua Agenda', icon: Calendar, color: 'bg-emerald-800' },
            { id: 'Bazar', label: 'Bazar', icon: ShoppingBag, color: 'bg-rose-500' },
            { id: 'Bukber', label: 'Bukber', icon: Utensils, color: 'bg-amber-500' },
            { id: 'Sosial', label: 'Sosial', icon: Gift, color: 'bg-cyan-500' },
            { id: 'Edukasi', label: 'Edukasi', icon: BookOpen, color: 'bg-indigo-500' }
        ];

        // --- MAIN APP COMPONENT ---
        function App() {
            const [activeCategory, setActiveCategory] = useState('Semua');
            const [todayDate, setTodayDate] = useState(null);
            const [todayMonth, setTodayMonth] = useState(null);
            
            const todayRef = useRef(null);

            useEffect(() => {
                const loadParticles = async () => {
                    await window.tsParticles.load("tsparticles", {
                        fullScreen: { enable: false },
                        fpsLimit: 60,
                        particles: {
                            number: { value: 60, density: { enable: true, area: 800 } },
                            color: { value: ["#fbbf24", "#ffffff", "#fcd34d"] },
                            shape: { type: ["circle", "star"], options: { star: { sides: 5 } } },
                            opacity: { value: 0.6, random: true, anim: { enable: true, speed: 1, opacity_min: 0.1 } },
                            size: { value: { min: 1, max: 3 }, random: true, anim: { enable: true, speed: 2, size_min: 0.1 } },
                            move: { enable: true, speed: 0.5, direction: "none", random: true, outModes: { default: "out" } }
                        },
                        interactivity: {
                            events: { onHover: { enable: true, mode: "bubble" }, onClick: { enable: true, mode: "push" }, resize: true },
                            modes: { bubble: { distance: 100, size: 5, duration: 2, opacity: 0.8 }, push: { quantity: 4 } }
                        },
                        detectRetina: true,
                        background: { color: "transparent" }
                    });
                };
                loadParticles();

                const date = new Date();
                setTodayDate(date.getDate()); 
                setTodayMonth(date.getMonth()); 
            }, []);

            useEffect(() => {
                if (todayRef.current && activeCategory === 'Semua') {
                    const timer = setTimeout(() => {
                        todayRef.current.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center',
                            inline: 'center'
                        });
                    }, 1000); 
                    return () => clearTimeout(timer);
                }
            }, [activeCategory, todayDate, todayMonth]);

            const filteredData = activeCategory === 'Semua' 
                ? scheduleData 
                : scheduleData.filter(item => item.category === activeCategory || (activeCategory === 'Sosial' && item.event.includes('Bazar') && item.event.includes('Sembako'))); 

            const getCategoryTheme = (cat) => {
                switch(cat) {
                    case 'Bazar': return {
                        badge: 'text-rose-700 bg-rose-50 border-rose-200',
                        border: 'border-rose-200 hover:border-rose-400',
                        shadow: 'hover:shadow-rose-100',
                        dayBg: 'bg-rose-500',
                        iconColor: 'text-rose-500',
                        mapBg: 'bg-rose-50'
                    };
                    case 'Bukber': return {
                        badge: 'text-amber-700 bg-amber-50 border-amber-200',
                        border: 'border-amber-200 hover:border-amber-400',
                        shadow: 'hover:shadow-amber-100',
                        dayBg: 'bg-amber-500',
                        iconColor: 'text-amber-500',
                        mapBg: 'bg-amber-50'
                    };
                    case 'Sosial': return {
                        badge: 'text-cyan-700 bg-cyan-50 border-cyan-200',
                        border: 'border-cyan-200 hover:border-cyan-400',
                        shadow: 'hover:shadow-cyan-100',
                        dayBg: 'bg-cyan-500',
                        iconColor: 'text-cyan-500',
                        mapBg: 'bg-cyan-50'
                    };
                    case 'Edukasi': return {
                        badge: 'text-indigo-700 bg-indigo-50 border-indigo-200',
                        border: 'border-indigo-200 hover:border-indigo-400',
                        shadow: 'hover:shadow-indigo-100',
                        dayBg: 'bg-indigo-500',
                        iconColor: 'text-indigo-500',
                        mapBg: 'bg-indigo-50'
                    };
                    default: return {
                        badge: 'text-slate-600 bg-slate-100 border-slate-200',
                        border: 'border-slate-100 hover:border-slate-300',
                        shadow: '',
                        dayBg: 'bg-slate-400',
                        iconColor: 'text-slate-400',
                        mapBg: 'bg-slate-50'
                    };
                }
            };

            const getIcon = (cat) => {
                switch(cat) {
                    case 'Bazar': return <ShoppingBag className="w-4 h-4" />;
                    case 'Bukber': return <Utensils className="w-4 h-4" />;
                    case 'Sosial': return <Gift className="w-4 h-4" />;
                    case 'Edukasi': return <BookOpen className="w-4 h-4" />;
                    default: return <Moon className="w-4 h-4" />;
                }
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-12">
                    {/* Header */}
                    <div className="bg-emerald-900 h-64 md:h-56 relative overflow-hidden">
                        <div id="tsparticles" className="absolute top-0 left-0 w-full h-full z-0"></div>
                        <div className="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent to-emerald-900/50 z-0 pointer-events-none"></div>
                        <div className="container mx-auto px-4 h-full flex flex-col justify-center items-center relative z-10 text-center">
                            <h1 className="text-3xl md:text-5xl font-bold text-white mb-2 tracking-wide font-serif drop-shadow-md">
                                Jadwal Ramadhan 1447 H
                            </h1>
                            <p className="text-emerald-100 text-lg font-light tracking-widest uppercase drop-shadow-sm">Program CSR & Kegiatan Sosial PT SBI</p>
                        </div>
                    </div>

                    {/* Filter Navigation */}
                    <div className="container mx-auto px-4 -mt-8 relative z-20">
                        <div className="bg-white rounded-xl shadow-lg p-2 md:p-4 flex flex-wrap justify-center gap-2 overflow-x-auto">
                            {categories.map((cat) => (
                                <button
                                    key={cat.id}
                                    onClick={() => setActiveCategory(cat.id)}
                                    className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 whitespace-nowrap
                                        ${activeCategory === cat.id 
                                            ? `${cat.color} text-white shadow-md transform scale-105` 
                                            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}
                                >
                                    {<cat.icon size={16} />}
                                    {cat.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Content */}
                    <div className="container mx-auto px-4 mt-8">
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                            {filteredData.map((item, index) => {
                                if (activeCategory !== 'Semua' && !item.event) return null;
                                
                                const theme = getCategoryTheme(item.category);
                                const isToday = item.day === todayDate && item.month === todayMonth;

                                return (
                                    <div 
                                        key={index}
                                        ref={isToday ? todayRef : null}
                                        className={`group relative rounded-2xl p-6 pb-12 shadow-sm border transition-all duration-300 hover:shadow-xl hover:-translate-y-1
                                            ${item.event ? `${theme.border} ${theme.shadow}` : 'bg-white border-gray-100 opacity-60 hover:opacity-100'}
                                            ${isToday ? 'card-today ring-4 ring-emerald-100' : 'bg-white'}
                                        `}
                                    >
                                        {isToday && (
                                            <div className="absolute -top-6 left-1/2 transform -translate-x-1/2 z-20 badge-today">
                                                <div className="bg-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border-2 border-white flex items-center gap-1">
                                                    <span>üìç</span> HARI INI
                                                </div>
                                            </div>
                                        )}

                                        <div className="absolute -top-3 -right-3">
                                            <div className={`
                                                w-12 h-12 rounded-full flex flex-col items-center justify-center text-xs font-bold text-white shadow-md
                                                ${theme.dayBg}
                                            `}>
                                                <span className="text-[10px] font-normal opacity-90">Ke</span>
                                                <span className="text-lg leading-none">{item.ramadhan}</span>
                                            </div>
                                        </div>

                                        <div className="flex items-center gap-3 mb-4">
                                            <div className={`p-2 rounded-lg font-bold text-xl min-w-[3.5rem] text-center border
                                                ${theme.lightBg || 'bg-slate-50'} ${theme.iconColor || 'text-slate-500'} ${theme.border}
                                            `}>
                                                {item.day}
                                            </div>
                                            <div className="flex flex-col">
                                                <span className="text-xs text-slate-500 uppercase tracking-wider font-semibold">Tanggal</span>
                                                <span className={`font-medium ${isToday ? 'text-emerald-700 font-bold' : 'text-slate-700'}`}>
                                                    {item.date.split(',')[0]}
                                                </span>
                                            </div>
                                        </div>

                                        {item.event ? (
                                            <div className="space-y-3">
                                                <div className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold border ${theme.badge}`}>
                                                    {getIcon(item.category)}
                                                    {item.category}
                                                </div>
                                                
                                                <h3 className="text-lg font-bold text-slate-800 leading-tight transition-colors">
                                                    {item.event}
                                                </h3>
                                                
                                                {item.loc && (
                                                    <div className={`flex items-start gap-2 text-sm text-slate-500 mt-2 p-2 rounded-md ${theme.mapBg}`}>
                                                        <MapPin size={16} className={`mt-0.5 flex-shrink-0 ${theme.iconColor}`} />
                                                        <span>{item.loc}</span>
                                                    </div>
                                                )}

                                                {/* Share Button Floating Bottom Right */}
                                                <button
                                                    onClick={(e) => {
                                                        e.stopPropagation();
                                                        const text = `‚ú® *Jadwal CSR Ramadhan 1447 H* ‚ú®\n\nüóìÔ∏è ${item.date} (Ramadhan ke-${item.ramadhan})\nüéâ *${item.event}*\nüìç Lokasi: ${item.loc || 'Di Tempat'}\n\nSumber: Program CSR & Kegiatan Sosial PT SBI`;
                                                        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
                                                    }}
                                                    className={`absolute bottom-4 right-4 p-2.5 rounded-full shadow-md transition-all duration-300 z-10 flex items-center justify-center
                                                        bg-slate-50 hover:bg-[#25D366] text-slate-400 hover:text-white border border-slate-200 hover:border-[#25D366]
                                                        hover:scale-110`}
                                                    title="Bagikan ke WhatsApp"
                                                >
                                                    <ShareIcon size={18} />
                                                </button>
                                            </div>
                                        ) : (
                                            <div className="h-20 flex items-center justify-center text-slate-400 italic text-sm border-2 border-dashed border-slate-100 rounded-lg">
                                                Tidak ada agenda khusus
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>

                        {filteredData.length === 0 && (
                            <div className="text-center py-20">
                                <div className="inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4">
                                    <Calendar className="text-gray-400" size={32} />
                                </div>
                                <h3 className="text-xl font-medium text-gray-600">Tidak ada agenda ditemukan</h3>
                                <p className="text-gray-400">Coba pilih kategori lain.</p>
                            </div>
                        )}
                    </div>
                    
                    <footer className="mt-16 text-center text-slate-400 text-sm pb-8">
                        <p>¬© 1447 H Program CSR Ramadhan</p>
                        <p className="mt-1">Indahnya Berbagi, Eratkan Silaturahmi</p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

